<html>
    <head>
        <title>food record</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
        <script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
    </head>

    <body>
      <div class="contact-clean">
        <div class="body-margin">
          <h2 class="text-center">入力画面</h2>
            <%= form_for(@food) do |f| %>
              <%= f.label :"店名" %>
              <%= f.text_field :store_name %><br>

              <%= f.label :"メニュー" %>
              <%= f.text_field :menu_name,size:"20"%><br>

              <%= f.label :"スープの味" %>
              <%= select_tag :taste, options_for_select(@taste_list),prompt:"選択してください" %><br>

              <%= f.label :"麺の太さ" %>
              <%= select_tag :thickness, options_for_select(@thickness_list),prompt:"選択してください" %><br>

              <%= f.label :"麺の硬さ" %>
              <%= select_tag :hardness, options_for_select(@hardness_list),prompt:"選択してください" %><br>

              <%= f.label :"味の濃さ" %>
              <%= select_tag :taste_intensity, options_for_select(@taste_intensity_list),prompt:"選択してください" %><br>

              <%= f.label :"総合評価" %>
              <%= select_tag :evalute, options_for_select(@evalute_list),prompt:"選択してください" %><br>

              <%= f.hidden_field :lineuser_id, :value => "shampoo.id" %>

              <%= f.submit "登録", class: "btn btn-primary" %>
            <% end %>

        </div>
      </div>

        <script>
            liff.init(
              data => {
                // Now you can call LIFF API
                const userId = data.context.userId;
                document.getElementById('foodrecord_lineuser_id').value = userId;

                liff.getProfile()
                .then(profile => {
                  document.getElementById('user_name').innerText = 'Name : ' + profile.displayName;
                  const name = profile.displayName
                  document.getElementById('user_photo').src = profile.pictureUrl;
                })
                .catch((err) => {
                  console.log('error', err);
                });
              },
              err => {
                // LIFF initialization failed
              }
            );
        </script>
    </body>

</html>
